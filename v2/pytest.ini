[pytest]
# =========================
# Test Discovery
# =========================
testpaths = v2/tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# =========================
# Logging
# =========================
log_cli = 0
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)s] %(message)s
log_date_format = %Y-%m-%d %H:%M:%S

# =========================
# Default Options
# =========================
addopts =
    --browser chromium
    --alluredir=allure-results
    --allure-link-pattern tms:https://aironworksqa.testrail.io/index.php?/cases/view/{}

# =========================
# Timeout
# =========================
timeout = 180

# =========================
# Markers
# =========================
markers =
    # Test Types
    smoke: quick sanity tests
    regression: full regression tests
    e2e: end-to-end tests

    # Test Layer
    api: API tests
    ui: UI tests (alias for web)
    web: UI tests

    # Test Classification
    positive: positive test cases
    negative: negative test cases

    # Environment
    production_only: only runs on production
    staging_only: only runs on staging
    skip_ci: skip in CI/CD pipeline

    # Special
    settings: settings tests (run serially with -n0)
    slow: slow running tests
    flaky: flaky tests (may need retry)

    # Legacy (keep for backward compatibility)
    addin_api: tests for API addin features
    delivered_emails: email delivery tests
    test_id: TestRail test case ID
    dev: development/experimental tests